<script type="text/javascript">
  $(function() {
    var end_time = "<%= @contest.end_time.to_i %>";
    var target   = $("#sec");
    function update() {
      var diff = Math.max(0, end_time - new Date() / 1000);
      var hour = String(Math.floor(diff / 3600));
	  if (hour.length == 1) {
	    hour = "0" + hour;
      }
      var min  = ("00" + String(Math.floor(diff % 3600 / 60))).substr(-2);
      var sec  = ("00" + String(Math.floor(diff % 3600) % 60)).substr(-2);
      var time = hour + ":" + min + ":" + sec;
      target.html(time);
    }
    update();
    setInterval(update, 500);
  });
</script>
